{% extends '../main.html' %}

{% block content %}


<title> Répondre à la question </title>
<style>

    #sec{
        margin: 10% 4%;
        width: 80%;
        max-height: 100%;
        height : 100%;

    }

</style>



<body>

    <section id ='sec'>

        <!--A propos de la question et de l'auteur-->
        <section class="mb-5">
        <div class="row">
            <div class="col-md-8 mb-md-0 mb-4">
            <div class="jumbotron p-5 text-center text-md-left author-box wow fadeIn" data-wow-delay="0.3s"
                        style= "visibility: visible; animation-name:fadeIn; animation-delay:0.3s">

                <h4 class="h3-responsive text-center font-weight-bold dark-grey-text"> {{question.eleve_id.name}}</h4>
                <hr>

                <div class="row">
                    
                    <div class="col-4 col-md-4 mb-md-0 mb-4 view overlay">
                        <img src="{{question.eleve_id.photo_profile.url}}" class="img-fluid rounded-circle z-depth-2"> 
                        <!-- <div class="mask rgba-white-slight"></div> -->
                    </div>
                    <div class="col-4 col-md-8 mt-3">
                        <div class="personal-sm pb-3" style="font-style: italic; font-size:12px;">
                            <p  class="font-weight">{{question.eleve_id.classe}} {{question.eleve_id.genie}}</p>
                            <p  class="font-weight">{{question.eleve_id.age}} ans</p>
                        </div>
                        <blockquote class="blockquote mt-0 mb-4">
                            <em><h class="mt-1"> {{question.question}} </h></em>
                        </blockquote>
                    </div>
                </div>

            </div>
            </div>
        </div>
        </section>
        <!-- FIN A propos de la question et de l'auteur-->

    


        <!-- les reponses-->

        <section class="mb-5 wow fadeIn" data-wow-delay="0.7s" style="visibility: visible; animation-name:fadeIn; animation-delay:0.7s;">

            <div class="comments-list text-center text-md-left" >
                <h3 class="text-center font-weight-bold mb-5 pb-3"><span class="badge pink">{{reponse.count}}</span> Réponse{{reponse|pluralize}}</h3>
            
                <div class="row mb-4 mt-4">
                    {% for ans in reponse  %}

                    <div class="col-sm-2 col-12 mb-md-0 mb-3">
                        <img src="{{ans.el.photo_profile.url}}" class="avatar rounded-circle z-depth-1-half mb-5">
                    </div>


                    <div class="col-sm-10 col-12">
                        <a href="#">
                            <h6 class="font-weight-bold" style="color:black;"> {{ans.el.name}} </h6>  
                            <p style="color : black; font-size:12px; margin-top:-5px; font-style:italic;"> {{ans.el.classe}} - {{ans.el.genie}}  </p>
                        </a>
                        <div class="mt-2">  
                            <p class="grey-text" > {{ans.reponse}}</p>
                        
                            <small style="font-style: italic; margin-left:10px; float:right;">{{ans.date_reponse.date}}</small>
                        </div>
                    </div>                      
                    {% endfor %}
                    
                </div>

            </div>

            <hr>
            <div class="reply-form">
                <div class="row text-center text-md-left">
                    <div class="col-sm-2 col-8 mb-md-0 mt-4">
                        <img class="img-fluid avatar rounded-circle z-depth-0" src=" {{request.user.eleve.photo_profile.url}} ">
                    </div>

                    <form method="POST" action="{% url 'repondre' pk=question.pk %}" enctype="multipart/form-data" role='form'>
                        {% csrf_token %}
                        <div class="col-sm-10 col-12">
                            <div class="md-form">
                                {{rep_form.as_p}}
                            </div>
                            <!-- <input type='submit' value='Repondre' class =' btn btn-sm btn-outline-danger'> -->
                        </div>

                        <div class=" col-md-12 text-center mt-4">
                            <button class="btn btn-pink btn-rounded waves-effect waves-light" type="submit">Répondre</button>
                        </div>

                    </form>
                </div>

            </div>
        </section>

    </section>

</body>






























{% endblock content %}
    